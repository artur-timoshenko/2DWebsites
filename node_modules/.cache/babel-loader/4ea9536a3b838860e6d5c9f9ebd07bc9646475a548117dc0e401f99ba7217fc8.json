{"ast":null,"code":"import { useEffect, useState } from 'react';\nfunction useScript(src) {\n  const [status, setStatus] = useState(src ? 'loading' : 'idle');\n  useEffect(() => {\n    if (!src) {\n      setStatus('idle');\n      return;\n    }\n    let script = document.querySelector(`script[src=\"${src}\"]`);\n    if (!script) {\n      script = document.createElement('script');\n      script.src = src;\n      script.async = true;\n      script.setAttribute('data-status', 'loading');\n      document.body.appendChild(script);\n      const setAttributeFromEvent = event => {\n        script?.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error');\n      };\n      script.addEventListener('load', setAttributeFromEvent);\n      script.addEventListener('error', setAttributeFromEvent);\n    } else {\n      setStatus(script.getAttribute('data-status'));\n    }\n    const setStateFromEvent = event => {\n      setStatus(event.type === 'load' ? 'ready' : 'error');\n    };\n    script.addEventListener('load', setStateFromEvent);\n    script.addEventListener('error', setStateFromEvent);\n    return () => {\n      if (script) {\n        script.removeEventListener('load', setStateFromEvent);\n        script.removeEventListener('error', setStateFromEvent);\n      }\n    };\n  }, [src]);\n  return status;\n}\nexport default useScript;","map":{"version":3,"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAK3C,SAASC,SAASA,CAACC,GAAW;EAC5B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGJ,QAAQ,CAASE,GAAG,GAAG,SAAS,GAAG,MAAM,CAAC;EAEtEH,SAAS,CACP,MAAK;IACH,IAAI,CAACG,GAAG,EAAE;MACRE,SAAS,CAAC,MAAM,CAAC;MACjB;;IAKF,IAAIC,MAAM,GAAcC,QAAQ,CAACC,aAAa,CAAC,eAAeL,GAAG,IAAI,CAAC;IAEtE,IAAI,CAACG,MAAM,EAAE;MAEXA,MAAM,GAAGC,QAAQ,CAACE,aAAa,CAAC,QAAQ,CAAC;MACzCH,MAAM,CAACH,GAAG,GAAGA,GAAG;MAChBG,MAAM,CAACI,KAAK,GAAG,IAAI;MACnBJ,MAAM,CAACK,YAAY,CAAC,aAAa,EAAE,SAAS,CAAC;MAE7CJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,MAAM,CAAC;MAIjC,MAAMQ,qBAAqB,GAAIC,KAAY,IAAI;QAC7CT,MAAM,EAAEK,YAAY,CAClB,aAAa,EACbI,KAAK,CAACC,IAAI,KAAK,MAAM,GAAG,OAAO,GAAG,OAAO,CAC1C;MACH,CAAC;MAEDV,MAAM,CAACW,gBAAgB,CAAC,MAAM,EAAEH,qBAAqB,CAAC;MACtDR,MAAM,CAACW,gBAAgB,CAAC,OAAO,EAAEH,qBAAqB,CAAC;KACxD,MAAM;MAELT,SAAS,CAACC,MAAM,CAACY,YAAY,CAAC,aAAa,CAAW,CAAC;;IAMzD,MAAMC,iBAAiB,GAAIJ,KAAY,IAAI;MACzCV,SAAS,CAACU,KAAK,CAACC,IAAI,KAAK,MAAM,GAAG,OAAO,GAAG,OAAO,CAAC;IACtD,CAAC;IAGDV,MAAM,CAACW,gBAAgB,CAAC,MAAM,EAAEE,iBAAiB,CAAC;IAClDb,MAAM,CAACW,gBAAgB,CAAC,OAAO,EAAEE,iBAAiB,CAAC;IAGnD,OAAO,MAAK;MACV,IAAIb,MAAM,EAAE;QACVA,MAAM,CAACc,mBAAmB,CAAC,MAAM,EAAED,iBAAiB,CAAC;QACrDb,MAAM,CAACc,mBAAmB,CAAC,OAAO,EAAED,iBAAiB,CAAC;;IAE1D,CAAC;EACH,CAAC,EACD,CAAChB,GAAG,CAAC,CACN;EAED,OAAOC,MAAM;AACf;AAEA,eAAeF,SAAS","names":["useEffect","useState","useScript","src","status","setStatus","script","document","querySelector","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","type","addEventListener","getAttribute","setStateFromEvent","removeEventListener"],"sources":["C:\\Users\\Artur\\Desktop\\portfolio-inner-site-master\\node_modules\\usehooks-ts\\src\\useScript\\useScript.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nexport type Status = 'idle' | 'loading' | 'ready' | 'error'\nexport type ScriptElt = HTMLScriptElement | null\n\nfunction useScript(src: string): Status {\n  const [status, setStatus] = useState<Status>(src ? 'loading' : 'idle')\n\n  useEffect(\n    () => {\n      if (!src) {\n        setStatus('idle')\n        return\n      }\n\n      // Fetch existing script element by src\n      // It may have been added by another instance of this hook\n      let script: ScriptElt = document.querySelector(`script[src=\"${src}\"]`)\n\n      if (!script) {\n        // Create script\n        script = document.createElement('script')\n        script.src = src\n        script.async = true\n        script.setAttribute('data-status', 'loading')\n        // Add script to document body\n        document.body.appendChild(script)\n\n        // Store status in attribute on script\n        // This can be read by other instances of this hook\n        const setAttributeFromEvent = (event: Event) => {\n          script?.setAttribute(\n            'data-status',\n            event.type === 'load' ? 'ready' : 'error',\n          )\n        }\n\n        script.addEventListener('load', setAttributeFromEvent)\n        script.addEventListener('error', setAttributeFromEvent)\n      } else {\n        // Grab existing script status from attribute and set to state.\n        setStatus(script.getAttribute('data-status') as Status)\n      }\n\n      // Script event handler to update status in state\n      // Note: Even if the script already exists we still need to add\n      // event handlers to update the state for *this* hook instance.\n      const setStateFromEvent = (event: Event) => {\n        setStatus(event.type === 'load' ? 'ready' : 'error')\n      }\n\n      // Add event listeners\n      script.addEventListener('load', setStateFromEvent)\n      script.addEventListener('error', setStateFromEvent)\n\n      // Remove event listeners on cleanup\n      return () => {\n        if (script) {\n          script.removeEventListener('load', setStateFromEvent)\n          script.removeEventListener('error', setStateFromEvent)\n        }\n      }\n    },\n    [src], // Only re-run effect if script src changes\n  )\n\n  return status\n}\n\nexport default useScript\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}